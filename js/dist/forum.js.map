{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,GCLRF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3ER,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,I,mBCAlF,MAAM,EAA+BI,OAAOC,IAAIP,IAAI,OAAQ,a,aCA5D,MAAM,EAA+BM,OAAOC,IAAIP,IAAI,OAAQ,iBCAtD,EAA+BM,OAAOC,IAAIP,IAAI,OAAQ,kC,aCA5D,MAAM,EAA+BM,OAAOC,IAAIP,IAAI,OAAQ,4B,aCA5D,MAAM,EAA+BM,OAAOC,IAAIP,IAAI,OAAQ,4B,aCA5D,MAAM,EAA+BM,OAAOC,IAAIP,IAAI,OAAQ,4B,aCe7C,SAASQ,EAAoBC,GACrCC,UAAUC,UAIfD,UAAUC,UAAUC,UAAUH,GAnBIA,KAClC,IAAII,EAAWC,SAASC,cAAc,YACtCF,EAASG,MAAQP,EAGjBI,EAASI,MAAMC,IAAM,IACrBL,EAASI,MAAME,KAAO,IACtBN,EAASI,MAAMG,SAAW,QAC1BN,SAASO,KAAKC,YAAYT,GAC1BA,EAASU,QACTV,EAASW,SACTV,SAASW,YAAY,QACrBX,SAASO,KAAKK,YAAYb,IAIxBc,CAA4BlB,EAIhC,CACAH,OAAOC,IAAIqB,IAAI,uBAAwB,kCAAmCpB,GCf1E,iBAAiBoB,IAAI,8BAA+B,KAClD,MAAMC,EAA0BC,IAC9B,MAAMC,EAAMC,OAAOC,SAASC,OAASJ,EACrC,OAAOK,EAAE,IAAQ,CACfC,KAAM,cACNC,QAAS,KACP7B,EAAoBuB,GACpB,WAAWO,KAAK,CACdC,KAAM,WACL,eAAeC,MAAM,qDAEzB,eAAeA,MAAM,kDAE1B,IAAAC,QAAO,IAAoB,eAAgB,SAAUC,EAAOC,GAC1DD,EAAMd,IAAI,WAAYC,EAAwB,UAAUc,WAAWA,IACrE,IACA,IAAAF,QAAO,IAAc,eAAgB,SAAUC,EAAOE,GACpDF,EAAMd,IAAI,WAAYC,EAAwB,UAAUe,KAAKA,IAC/D,IACA,IAAAH,QAAO,IAAc,eAAgB,SAAUC,EAAOG,GACpDH,EAAMd,IAAI,WAAYC,EAAwB,UAAUgB,KAAKA,IAC/D,I","sources":["webpack://@datlechin/flarum-copy-links/webpack/bootstrap","webpack://@datlechin/flarum-copy-links/webpack/runtime/compat get default export","webpack://@datlechin/flarum-copy-links/webpack/runtime/define property getters","webpack://@datlechin/flarum-copy-links/webpack/runtime/hasOwnProperty shorthand","webpack://@datlechin/flarum-copy-links/external root \"flarum.reg.get('core', 'forum/app')\"","webpack://@datlechin/flarum-copy-links/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@datlechin/flarum-copy-links/external root \"flarum.reg.get('core', 'forum/utils/DiscussionControls')\"","webpack://@datlechin/flarum-copy-links/external root \"flarum.reg.get('core', 'forum/utils/PostControls')\"","webpack://@datlechin/flarum-copy-links/external root \"flarum.reg.get('core', 'forum/utils/UserControls')\"","webpack://@datlechin/flarum-copy-links/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@datlechin/flarum-copy-links/./src/forum/utils/copyTextToClipboard.js","webpack://@datlechin/flarum-copy-links/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/utils/DiscussionControls');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/utils/PostControls');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/utils/UserControls');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","// Credit: https://stackoverflow.com/a/30810322\nconst fallbackCopyTextToClipboard = text => {\n  var textArea = document.createElement('textarea');\n  textArea.value = text;\n\n  // Avoid scrolling to bottom\n  textArea.style.top = '0';\n  textArea.style.left = '0';\n  textArea.style.position = 'fixed';\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n  document.execCommand('copy');\n  document.body.removeChild(textArea);\n};\nexport default function copyTextToClipboard(text) {\n  if (!navigator.clipboard) {\n    fallbackCopyTextToClipboard(text);\n    return;\n  }\n  navigator.clipboard.writeText(text);\n}\nflarum.reg.add('datlechin-copy-links', 'forum/utils/copyTextToClipboard', copyTextToClipboard);","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\nimport PostControls from 'flarum/forum/utils/PostControls';\nimport UserControls from 'flarum/forum/utils/UserControls';\nimport Button from 'flarum/common/components/Button';\nimport copyTextToClipboard from './utils/copyTextToClipboard';\napp.initializers.add('datlechin/flarum-copy-links', () => {\n  const CopyLinkButtonComponent = route => {\n    const url = window.location.origin + route;\n    return m(Button, {\n      icon: \"fas fa-copy\",\n      onclick: () => {\n        copyTextToClipboard(url);\n        app.alerts.show({\n          type: 'success'\n        }, app.translator.trans('datlechin-copy-links.forum.link_copied_message'));\n      }\n    }, app.translator.trans('datlechin-copy-links.forum.copy_link_button'));\n  };\n  extend(DiscussionControls, 'userControls', function (items, discussion) {\n    items.add('copyLink', CopyLinkButtonComponent(app.route.discussion(discussion)));\n  });\n  extend(PostControls, 'userControls', function (items, post) {\n    items.add('copyLink', CopyLinkButtonComponent(app.route.post(post)));\n  });\n  extend(UserControls, 'userControls', function (items, user) {\n    items.add('copyLink', CopyLinkButtonComponent(app.route.user(user)));\n  });\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","reg","copyTextToClipboard","text","navigator","clipboard","writeText","textArea","document","createElement","value","style","top","left","position","body","appendChild","focus","select","execCommand","removeChild","fallbackCopyTextToClipboard","add","CopyLinkButtonComponent","route","url","window","location","origin","m","icon","onclick","show","type","trans","extend","items","discussion","post","user"],"sourceRoot":""}