{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@datlechin/flarum-copy-links/./src/forum/index.js","webpack://@datlechin/flarum-copy-links/./src/forum/utils/copyTextToClipboard.js","webpack://@datlechin/flarum-copy-links/external root \"flarum.core.compat['common/components/Button']\"","webpack://@datlechin/flarum-copy-links/external root \"flarum.core.compat['common/extend']\"","webpack://@datlechin/flarum-copy-links/external root \"flarum.core.compat['forum/app']\"","webpack://@datlechin/flarum-copy-links/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@datlechin/flarum-copy-links/external root \"flarum.core.compat['forum/utils/PostControls']\"","webpack://@datlechin/flarum-copy-links/external root \"flarum.core.compat['forum/utils/UserControls']\"","webpack://@datlechin/flarum-copy-links/webpack/bootstrap","webpack://@datlechin/flarum-copy-links/webpack/runtime/compat get default export","webpack://@datlechin/flarum-copy-links/webpack/runtime/define property getters","webpack://@datlechin/flarum-copy-links/webpack/runtime/hasOwnProperty shorthand","webpack://@datlechin/flarum-copy-links/webpack/runtime/make namespace object"],"sourcesContent":["import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\nimport PostControls from 'flarum/forum/utils/PostControls';\nimport UserControls from 'flarum/forum/utils/UserControls';\nimport Button from 'flarum/common/components/Button';\nimport copyTextToClipboard from './utils/copyTextToClipboard';\n\napp.initializers.add('datlechin/flarum-copy-links', () => {\n  const CopyLinkButtonComponent = (route) => {\n    const url = window.location.origin + route;\n\n    return (\n      <Button\n        icon=\"fas fa-copy\"\n        onclick={() => {\n          copyTextToClipboard(url);\n\n          app.alerts.show(\n            {\n              type: 'success',\n            },\n            app.translator.trans('datlechin-copy-links.forum.link_copied_message')\n          );\n        }}\n      >\n        {app.translator.trans('datlechin-copy-links.forum.copy_link_button')}\n      </Button>\n    );\n  };\n\n  extend(DiscussionControls, 'userControls', function (items, discussion) {\n    items.add('copyLink', CopyLinkButtonComponent(app.route.discussion(discussion)));\n  });\n\n  extend(PostControls, 'userControls', function (items, post) {\n    items.add('copyLink', CopyLinkButtonComponent(app.route.post(post)));\n  });\n\n  extend(UserControls, 'userControls', function (items, user) {\n    items.add('copyLink', CopyLinkButtonComponent(app.route.user(user)));\n  });\n});\n","// Credit: https://stackoverflow.com/a/30810322\nconst fallbackCopyTextToClipboard = (text) => {\n  var textArea = document.createElement('textarea');\n  textArea.value = text;\n\n  // Avoid scrolling to bottom\n  textArea.style.top = '0';\n  textArea.style.left = '0';\n  textArea.style.position = 'fixed';\n\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  document.execCommand('copy');\n\n  document.body.removeChild(textArea);\n};\n\nexport default function copyTextToClipboard(text) {\n  if (!navigator.clipboard) {\n    fallbackCopyTextToClipboard(text);\n    return;\n  }\n\n  navigator.clipboard.writeText(text);\n}\n","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/utils/DiscussionControls'];","module.exports = flarum.core.compat['forum/utils/PostControls'];","module.exports = flarum.core.compat['forum/utils/UserControls'];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["app","extend","DiscussionControls","PostControls","UserControls","Button","copyTextToClipboard","initializers","add","CopyLinkButtonComponent","route","url","window","location","origin","m","icon","onclick","alerts","show","type","translator","trans","items","discussion","post","user","fallbackCopyTextToClipboard","text","textArea","document","createElement","value","style","top","left","position","body","appendChild","focus","select","execCommand","removeChild","navigator","clipboard","writeText"],"sourceRoot":""}